---
title: 阅读《重构：改善既有代码的设计》笔记
date: 2021-09-05 09:43:28
permalink: /pages/a1f9b4/
categories:
  - 笔记
tags:
  - 
---

# 阅读《重构：改善既有代码的设计》笔记

- 所谓重构（refactoring）是这样一个过程：在不改变代码外在行为的前提下，对代码做出修改，以改进程序的内部结构。
- 本质上：重构就是在代码写好之后改进它的设计。


<!-- more -->

## 何时需要考虑重构

如果你要给程序添加一个特性，但发现代码因缺乏良好的结构而不易于进行更改，那就先重构那个程序，使其比较容易添加该特性，然后再添加该特性。

**重构步骤**：

> 小步修改，每次修改后就运行测试。
> 重构技术就是以微小的步伐修改程序。如果你犯下错误，很容易便可发现它。

1. 确保即将修改的代码拥有一组可靠的测试。
   - 重构前，先检查自己是否有一套可靠的测试集。这些测试必须有自我检验能力。
2. 提炼函数
   - 需要检查一下，如果将这块代码提炼到自己的一个函数里，有哪些变量会离开原本的作用域。
   - 考虑哪些会被修改的变量以及不会被修改的变量
   - 考虑是否需要返回结果


## 重构手法

1. 拆分循环
2. 移动语句
3. 提炼函数
4. 内联变量