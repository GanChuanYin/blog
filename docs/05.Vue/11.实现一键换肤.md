---
title: 实现一键换肤
date: 2022-04-12 10:56:08
permalink: /pages/9430e5/
categories:
  - Vue
tags:
  - vue
---

重点： 给 body 赋值不同的类名切换主题

![](https://qiniu.espe.work/blog/20220412221801.png)

### theme.scss 主文件

![](https://qiniu.espe.work/blog/20220412221945.png)

### 每个 theme 主题的组成

1. 变量文件

![](https://qiniu.espe.work/blog/20220412222132.png)

2. 引入文件
   ![](https://qiniu.espe.work/blog/20220412222246.png)

这里先引入了变量文件然后引入 theme.scss 主文件

编译以后就会生成

```css
.theme-dark-technology {
  .app-container {
    /* 各种样式代码 */
  }
}
```

同理其它的主题也会形成类似的主题文件

这样我们就得到了

```css
/* 深色主题 */
.theme-dark-technology {
  .app-container {
    /* 各种样式代码 */
  }
}

/* 浅色主题 */
.theme-light-simple {
  .app-container {
    /* 各种样式代码 */
  }
}
```

样式代码准备好了，接下来就解决主题的切换

### theme store 管理主题状态

```js
export default {
  namespaced: true,

  state: {
    activeTheme: getStorageTheme()
  },

  getters: {},

  mutations: {
    mergeState(state: any, payload: any = {}) {
      mergeOptions(state, payload)
    },
    addClassName(state, key) {
      state.activeTheme = key
      setStorageTheme(key) // 持久化到localStorage
      document.body.className = `theme-${state.activeTheme}`
    }
  },

  actions: {
    applyTheme(context: any, key: any) {
      context.commit('addClassName', key)
    }
  }
}
```

这样在合适的组件里执行 applyTheme(key) 就可以切换主题了


用一个简单菜单来演示下切换效果

![](https://qiniu.espe.work/blog/change-theme.gif)

### 总结

这个方案比较简单易于实现，但是由于每个主题都有一套样式代码，很容易产生大量代码，所以一般推荐提取公共代码到theme-base.scss。