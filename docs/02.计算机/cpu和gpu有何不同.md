---
title: cpu和gpu有何不同
date: 2022-05-16 14:32:56
permalink: /pages/d860d4/
categories:
  - 计算机
tags:
  - 
---
### 用途不同导致架构设计差异

- CPU 要承担整个计算机的控制工作
- GPU 主要负责单纯的计算工作

英伟达的 CUDA 文档里给了这样一幅图：

![](https://raw.gitmirror.com/GanChuanYin/picture/main/blog/20220516143328.png)

其中 ALU 就是“算术逻辑单元（Arithmetic logic unit）”。

CPU架构图
![](https://raw.gitmirror.com/GanChuanYin/picture/main/blog/20220516144848.png)

GPU 架构图
![](https://raw.gitmirror.com/GanChuanYin/picture/main/blog/20220516145538.png)

CPU 和 GPU 进行计算的部分都是 ALU ，而如图所示，GPU 绝大部分的芯片面积都是 ALU，而且是超大阵列排布的 ALU。<font color=#00dddd size=4>这些 ALU 都是可以并行运行的</font> ，所以浮点计算速度就特别高了。

相比起来，<font color=#00dddd size=4>CPU 大多数面积都需要给控制单元和 Cache，因为 CPU 要承担整个计算机的控制工作，没有 GPU 那么单纯</font>。

所以 GPU 的程序控制能力相比 CPU 来说不强，稍早时候的 CUDA 程序像是递归都是不能用的（较新的设备上可以了）。

### CPU 也可以增强浮点计算能力，但没必要

不是 CPU 不能提高浮点计算速度，而是因为没什么特别的必要了。

因为 <font color=#00dddd size=4>通常的桌面应用根本没有什么特别的浮点计算能力要求</font> 。

而同时 GPU 这样的设备已经出现了，那么需要浮点计算的场合利用上就行了

所以与 CPU 擅长逻辑控制，串行的运算。和通用类型数据运算不同，GPU 擅长的是大规模并发计算，这也正是密码破解等所需要的。
所以 GPU 除了图像处理，也越来越多的参与到计算当中来。

GPU 的工作大部分就是这样，计算量大，但没什么技术含量，而且要重复很多很多次。

就像你有个工作需要算几亿次一百以内加减乘除一样，最好的办法就是雇上几十个小学生一起算，一人算一部分，反正这些计算也没什么技术含量，纯粹体力活而已。

而 CPU 就像老教授，积分微分都会算，就是工资高，一个老教授资顶二十个小学生，你要是富士康你雇哪个？GPU 就是这样，用很多简单的计算单元去完成大量的计算任务，纯粹的人海战术。

这种策略基于一个前提，<font color=#00dddd size=4>就是小学生 A 和小学生 B 的工作没有什么依赖性，是互相独立的</font>。

很多涉及到大量计算的问题基本都有这种特性，比如你说的破解密码，挖矿和很多图形学的计算。这些计算可以分解为多个相同的简单小任务，每个任务就可以分给一个小学生去做。

但还有一些任务涉及到“流”的问题。比如控制计算机的 IO、资源分配、网络请求等这种比较复杂的问题都是 CPU 来做的。

### 什么类型的活儿适合 GPU 来做

1. <font color=#00dddd size=4>计算密集型</font> 的程序。所谓计算密集型(Compute-intensive)的程序，就是其大部分运行时间花在了寄存器运算上，寄存器的速度和处理器的速度相当，从寄存器读写数据几乎没有延时。可以做一下对比，读内存的延迟大概是几百个时钟周期；读硬盘的速度就不说了，即便是 SSD, 也实在是太慢了。
2. 易于并行的程序。GPU 其实是一种 SIMD(Single Instruction Multiple Data)架构， 他有成百上千个核，每一个核在同一时间最好能做同样的事情。
